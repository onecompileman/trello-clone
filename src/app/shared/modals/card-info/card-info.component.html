<div class="tc-create-board">
  <form [formGroup]="editCardForm">
    <div class="modal-header">
      <h4 class="modal-title text-sm pull-left d-flex">
        <img src="assets/images/logo.png" alt="Logo" class="mr-2" height="32" />
        <span (click)="isNameEdit = true" *ngIf="!isNameEdit">{{
          card?.name
        }}</span>
        <div *ngIf="isNameEdit" class="form-group">
          <input
            type="text"
            class="form-control"
            required
            formControlName="name"
            maxlength="50"
            (blur)="isNameEdit = false; update()"
            (keydown.enter)="$event.target.blur(); isNameEdit = false; update()"
          />
        </div>
      </h4>
      <div class="pull-right d-flex align-items-center">
        <div class="btn-group mr-2" dropdown>
          <button
            dropdownToggle
            aria-controls="dropdown-basic"
            class="btn btn-default"
          >
            <i class="fa fa-ellipsis-v"> </i>
          </button>
          <ul
            id="dropdown-basic"
            *dropdownMenu
            class="dropdown-menu"
            role="menu"
            aria-labelledby="button-basic"
          >
            <li role="menuitem">
              <a class="dropdown-item" (click)="deleteCard()">Delete Card</a>
            </li>
          </ul>
        </div>

        <button
          type="button"
          class="close"
          aria-label="Close"
          (click)="modalRef.hide()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for=""> Card Description </label>
        <p
          *ngIf="!isDescriptionEdit"
          (click)="isDescriptionEdit = true"
          [innerHTML]="card?.description"
          style="white-space: pre-wrap"
        ></p>
        <textarea
          *ngIf="isDescriptionEdit"
          name=""
          id=""
          cols="30"
          class="form-control"
          formControlName="description"
          (blur)="isDescriptionEdit = false; update()"
          (keydown.enter)="
            $event.target.blur(); isDescriptionEdit = false; update()
          "
        ></textarea>
      </div>

      <div class="tc-create-board__images">
        <div class="d-flex align-items-center">
          <i class="fa fa-image mr-2"></i>
          <span>Images</span>
        </div>

        <div class="d-flex align-items-center mt-2">
          <div
            class="tc-create-board__image-item m-2 text-cursor"
            *ngFor="let image of card?.images; let i = index"
            [ngStyle]="{
              backgroundImage: 'url(' + image + ')'
            }"
            (click)="openPicture(i)"
          >
            <i
              class="fa fa-times-circle text-cursor"
              (click)="removeExistingImage(i)"
            ></i>
          </div>

          <div
            class="tc-create-board__image-item m-2"
            *ngFor="let image of imageURLs; let i = index"
            [ngStyle]="{
              backgroundImage: image
            }"
          >
            <i
              class="fa fa-times-circle text-cursor"
              (click)="removeImage(i)"
            ></i>
          </div>
          <input
            type="file"
            class="d-none"
            #imageUpload
            (change)="onUploadImage($event)"
          />
          <div class="tc-create-board__add-image" (click)="imageUpload.click()">
            + Add Image
          </div>
        </div>
      </div>

      <!-- <div class="d-flex justify-content-end w-100">
        <button class="btn btn-danger" (click)="deleteCard()">
          Delete Card
        </button>
      </div> -->
    </div>
  </form>
</div>
